{
  "version": 3,
  "sources": ["../.pnpm/@vaadin/board@22.0.0-beta2/node_modules/@vaadin/board/src/vaadin-board-row.js"],
  "sourcesContent": ["/**\n * @license\n * Copyright (c) 2017 - 2021 Vaadin Ltd\n * This program is available under Commercial Vaadin Developer License 4.0, available at https://vaadin.com/license/cvdl-4.0.\n */\nimport { IronResizableBehavior } from '@polymer/iron-resizable-behavior/iron-resizable-behavior.js';\nimport { DomIf } from '@polymer/polymer/lib/elements/dom-if.js';\nimport { DomRepeat } from '@polymer/polymer/lib/elements/dom-repeat.js';\nimport { mixinBehaviors } from '@polymer/polymer/lib/legacy/class.js';\nimport { afterNextRender } from '@polymer/polymer/lib/utils/render-status.js';\nimport { html, PolymerElement } from '@polymer/polymer/polymer-element.js';\nimport { ElementMixin } from '@vaadin/component-base/src/element-mixin.js';\n\nconst CLASSES = {\n  SMALL: 'small',\n  MEDIUM: 'medium',\n  LARGE: 'large'\n};\n\n/**\n * `<vaadin-board-row>` is a web component that together with `<vaadin-board>` component allows\n * to create flexible responsive layouts and build nice looking dashboard.\n *\n * Each row can contain up to four elements (fewer if colspan is used) and is automatically responsive.\n * The row changes between `large`, `medium` and `small` modes depending on the available width and\n * the set breakpoints.\n *\n * In `large` mode, typically all content is shown side-by-side, in `medium` half of the content is\n * side by side and in `small` mode, content is laid out vertically.\n *\n * The breakpoints can be set using custom CSS properties.\n * By default the breakpoints are `small: <600px`, `medium: < 960px`, `large >= 960px`.\n *\n * ```html\n * <vaadin-board>\n *   <vaadin-board-row>\n *     <div>This could be chart 1</div>\n *     <div>This could be chart 2</div>\n *     <div>This could be chart 3</div>\n *     <div>This could be chart 4</div>\n *   </vaadin-board-row>\n * </vaadin-board>\n * ```\n *\n * ### Styling\n *\n * The following custom properties are available for styling:\n *\n * Custom property | Description | Default\n * ----------------|-------------|-------------\n * `--vaadin-board-width-small` | Determines the width where mode changes from `small` to `medium` | `600px`\n * `--vaadin-board-width-medium` | Determines the width where mode changes from `medium` to `large` | `960px`\n *\n * @extends HTMLElement\n * @mixes ElementMixin\n */\nclass BoardRow extends ElementMixin(mixinBehaviors([IronResizableBehavior], PolymerElement)) {\n  static get template() {\n    return html`\n      <style>\n        :host {\n          display: flex;\n          flex-flow: row wrap;\n          align-items: stretch;\n          --small-size: var(--vaadin-board-width-small, 600px);\n          --medium-size: var(--vaadin-board-width-medium, 960px);\n        }\n\n        :host ::slotted(*) {\n          box-sizing: border-box;\n          flex-grow: 1;\n          overflow: hidden;\n        }\n      </style>\n      <slot id=\"insertionPoint\"></slot>\n    `;\n  }\n\n  static get is() {\n    return 'vaadin-board-row';\n  }\n\n  constructor() {\n    super();\n    this._onIronResize = this._onIronResize.bind(this);\n    this._oldWidth = 0;\n    this._oldBreakpoints = { smallSize: 600, mediumSize: 960 };\n    this._oldFlexBasis = [];\n  }\n\n  /** @protected */\n  ready() {\n    super.ready();\n    this.addEventListener('iron-resize', this._onIronResize, true);\n    this.$.insertionPoint.addEventListener('slotchange', this.redraw.bind(this));\n    afterNextRender(this, function () {\n      //force this as an interested resizable of parent\n      this.dispatchEvent(\n        new CustomEvent('iron-request-resize-notifications', {\n          node: this,\n          bubbles: true,\n          cancelable: true,\n          composed: true,\n          detail: {}\n        })\n      );\n    });\n  }\n\n  /** @protected */\n  connectedCallback() {\n    super.connectedCallback();\n    afterNextRender(this, this._onIronResize);\n  }\n\n  /**\n   * Adds styles for board row based on width.\n   * @private\n   */\n  _addStyleNames(width, breakpoints) {\n    if (width < breakpoints.smallSize) {\n      this.classList.add(CLASSES.SMALL);\n      this.classList.remove(CLASSES.MEDIUM);\n      this.classList.remove(CLASSES.LARGE);\n    } else if (width < breakpoints.mediumSize) {\n      this.classList.remove(CLASSES.SMALL);\n      this.classList.add(CLASSES.MEDIUM);\n      this.classList.remove(CLASSES.LARGE);\n    } else {\n      this.classList.remove(CLASSES.SMALL);\n      this.classList.remove(CLASSES.MEDIUM);\n      this.classList.add(CLASSES.LARGE);\n    }\n  }\n\n  /**\n   * Calculates flex basis based on colSpan, width and breakpoints.\n   * @param {number} colSpan colspan value of the row\n   * @param {number} width width of the row in px\n   * @param {number} colsInRow number of columns in the row\n   * @param {object} breakpoints object with smallSize and mediumSize number properties, which tells\n   * where the row should switch rendering size in pixels.\n   * @private\n   */\n  _calculateFlexBasis(colSpan, width, colsInRow, breakpoints) {\n    if (width < breakpoints.smallSize) {\n      colsInRow = 1;\n    } else if (width < breakpoints.mediumSize && colsInRow == 4) {\n      colsInRow = 2;\n    }\n    let flexBasis = (colSpan / colsInRow) * 100;\n    flexBasis = flexBasis > 100 ? 100 : flexBasis;\n    return flexBasis + '%';\n  }\n\n  /** @private */\n  _reportError() {\n    const errorMessage = 'The column configuration is not valid; column count should add up to 3 or 4.';\n    console.warn(errorMessage, 'check: \\r\\n' + this.outerHTML);\n  }\n\n  /**\n   * Parses board-cols from DOM.\n   * If there is not enough space in the row drop board cols.\n   * @param {!Array<!Node>} nodes array of nodes\n   * @return {!Array<number>} array of boardCols\n   * @private\n   */\n  _parseBoardCols(nodes) {\n    const boardCols = nodes.map((node) => {\n      if (node.getAttribute('board-cols')) {\n        return parseInt(node.getAttribute('board-cols'));\n      }\n      return 1;\n    });\n\n    let spaceLeft = 4;\n    let returnBoardCols = [];\n    nodes.forEach((node, i) => {\n      spaceLeft = spaceLeft - boardCols[i];\n    });\n\n    if (spaceLeft < 0) {\n      this._reportError();\n      boardCols.forEach((node, i) => {\n        returnBoardCols[i] = 1;\n      });\n    } else {\n      returnBoardCols = boardCols.slice(0);\n    }\n\n    return returnBoardCols;\n  }\n\n  /**\n   * If there is not enough space in the row.\n   * Extra items are dropped from DOM.\n   * @param {!Array<number>} boardCols array of board-cols for every node\n   * @param {!Array<!Node>} nodes array of nodes\n   * @return {!Array<!Node>} filtered array of nodes\n   * @private\n   */\n  _removeExtraNodesFromDOM(boardCols, nodes) {\n    let isErrorReported = false;\n    let spaceLeft = 4;\n    let returnNodes = [];\n    nodes.forEach((node, i) => {\n      spaceLeft = spaceLeft - boardCols[i];\n      if (spaceLeft < 0) {\n        if (!isErrorReported) {\n          isErrorReported = true;\n          this._reportError();\n        }\n        this.removeChild(node);\n      } else {\n        returnNodes[i] = node;\n      }\n    });\n    return returnNodes;\n  }\n\n  /**\n   * Redraws the row, if necessary.\n   *\n   * In most cases, a board row will redraw itself if your reconfigure it.\n   * If you dynamically change CSS which affects the row, then you need to call this method.\n   */\n  redraw() {\n    this._recalculateFlexBasis(true);\n  }\n\n  /** @private */\n  _onIronResize() {\n    this._recalculateFlexBasis(false);\n  }\n\n  /** @private */\n  _recalculateFlexBasis(forceResize) {\n    const width = this.getBoundingClientRect().width;\n    const breakpoints = this._measureBreakpointsInPx();\n    if (\n      forceResize ||\n      width != this._oldWidth ||\n      breakpoints.smallSize != this._oldBreakpoints.smallSize ||\n      breakpoints.mediumSize != this._oldBreakpoints.mediumSize\n    ) {\n      const nodes = this.$.insertionPoint.assignedNodes({ flatten: true });\n      const isElementNode = function (node) {\n        return !(node.nodeType === node.TEXT_NODE || node instanceof DomRepeat || node instanceof DomIf);\n      };\n      const filteredNodes = nodes.filter(isElementNode);\n      this._addStyleNames(width, breakpoints);\n      const boardCols = this._parseBoardCols(filteredNodes);\n      const colsInRow = boardCols.reduce((a, b) => a + b, 0);\n      this._removeExtraNodesFromDOM(boardCols, filteredNodes).forEach((e, i) => {\n        let newFlexBasis = this._calculateFlexBasis(boardCols[i], width, colsInRow, breakpoints);\n        if (forceResize || !this._oldFlexBasis[i] || this._oldFlexBasis[i] != newFlexBasis) {\n          this._oldFlexBasis[i] = newFlexBasis;\n          e.style.flexBasis = newFlexBasis;\n        }\n      });\n      this._oldWidth = width;\n      this._oldBreakpoints = breakpoints;\n    }\n  }\n\n  /**\n   * Measure the breakpoints in pixels.\n   *\n   * The breakpoints for `small` and `medium` can be given in any unit: `px`, `em`, `in` etc.\n   * We need to know them in `px` so that they are comparable with the actual size.\n   *\n   * @return {object} object with smallSize and mediumSize number properties, which tells\n   * where the row should switch rendering size in pixels.\n   * @private\n   */\n  _measureBreakpointsInPx() {\n    // Convert minWidth to px units for comparison\n    const breakpoints = {};\n    const tmpStyleProp = 'background-position';\n    const smallSize = getComputedStyle(this).getPropertyValue('--small-size');\n    const mediumSize = getComputedStyle(this).getPropertyValue('--medium-size');\n    this.style.setProperty(tmpStyleProp, smallSize);\n    breakpoints.smallSize = parseFloat(getComputedStyle(this).getPropertyValue(tmpStyleProp));\n    this.style.setProperty(tmpStyleProp, mediumSize);\n    breakpoints.mediumSize = parseFloat(getComputedStyle(this).getPropertyValue(tmpStyleProp));\n    this.style.removeProperty(tmpStyleProp);\n    return breakpoints;\n  }\n}\n\ncustomElements.define(BoardRow.is, BoardRow);\n\nexport { BoardRow };\n"],
  "mappings": "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",
  "names": []
}
